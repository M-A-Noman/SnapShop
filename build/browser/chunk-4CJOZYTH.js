import{a as g}from"./chunk-E5WWWRRR.js";import{a as l}from"./chunk-NR4KKSSU.js";import{Ua as f,Za as h,bb as m,m as a,o as n}from"./chunk-ITCRWGAV.js";var O=(()=>{let e=class e{constructor(r,t,o){this.checkoutService=r,this.userService=t,this.dataService=o,this.currentLoggedInUserId=-1,this.orderPlaced=!1}saveDataInLocalStorage(r,t){localStorage.setItem(JSON.stringify(r),JSON.stringify(t))}generateOrderId(){let r=Date.now().toString(36),t=Math.random().toString(36).substring(2,15);return`${r}-${t}`}addOrderInformation(r){this.userService.loginChanged.subscribe(t=>{this.currentLoggedInUserId=t;let o=this.generateOrderId(),c=new Date().toDateString();this.currentInfo={name:"orderInfo",id:this.currentLoggedInUserId};let d={orderId:o,orderDate:c,orderStatus:"Completed",products:r},u=this.getOrderInformation(this.currentInfo),s=u||[];console.log(s,d),s.push(d),this.saveDataInLocalStorage(this.currentInfo,s),console.log(s,d),this.checkoutService.orderPlaced.next(!1)})}getOrderInformation(r){let t=[],o=localStorage.getItem(JSON.stringify(r));return t=JSON.parse(o),t}};e.\u0275fac=function(t){return new(t||e)(n(g),n(m),n(h))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var y=(()=>{let e=class e{constructor(r,t){this.authService=r,this.router=t}canActivate(r,t){let o=!1;return this.authService.loggedIn.subscribe(c=>{o=c}),o?!0:(this.router.navigate(["/home"]),!1)}};e.\u0275fac=function(t){return new(t||e)(n(l),n(f))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{O as a,y as b};
